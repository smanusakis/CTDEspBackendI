Los patrones de diseño son:

- Service discovery
- Service registry
- Edge server
- Central configuration
- Log aggregation
- Distributed tracing
- Circuit Breaker
- Reactive microservices
- Centralized monitoring and alarms

_____

Uno de los problemas más comunes cuando estamos trabajando con servicios es la necesidad de saber forzosamente dónde se encuentra cada servicio. A medida que las empresas crecen, también lo hace la cantidad de servicios que se requieren para darle soporte a la operación. Esto provoca que cada vez sea más difícil saber en dónde está cada servicio exactamente (IP, puerto).

El patrón **Service registry** permite contar con la creación de un servidor centralizado, donde todos los servicios se registren al momento de iniciar. De esta manera, cada uno de los servicios le tendrá que enviar la dirección IP, el puerto en el que responde al servidor y, finalmente, el identificador de servicio (que por lo general es un nombre alfanumérico que ayuda a identificarlo). De esta forma, el servidor central o registro sabrá exactamente dónde está cada servicio disponible. Veamos cómo funciona



### Service Registry - En Spring: EUREKA
Indispensable en microservicios o en arq desarrolladas nativamente en la nube.
<br> Permite que los ss se puedan registrar indep de su ubicación física.
1. permite conocer su ubicación fácilmente
2. qué servicios están disponibles

Este patrón propone que sepamos exactamente qué servicios están disponibles y su ruta de acceso. Por lo general, proporciona una interfaz gráfica que nos permite ver todo el universo de servicios que se encuentran activos.

Otra característica es que los servicios que se registren, deberán estar enviando constantemente una señal al registro, conocida como “latidos” (heartbeat en inglés). Esta indica que los servicios siguen disponibles al pasar el tiempo. Si no recibe esa señal, el microservicio lo marca automáticamente como fuera de servicio y puede mandar en ese momento una notificación a algún administrador o DevOps para que lo administre.

Podemos concluir mencionando que el **Service registry** es un componente indispensable en una arquitectura de microservicios porque permite que los servicios se puedan registrar independientemente de su ubicación física. Esto genera que podamos conocer su ubicación fácilmente y, posteriormente, utilizar técnicas de autodescubrimiento para localizarlos y balancear la carga.

_____



### **Service discovery**
El patrón Service registry es complementario al patrón Service discovery (ya veremos por qué), pero antes es necesario aclarar que —en arquitecturas cloud— la elasticidad es la capacidad de la nube para crecer o disminuir en recursos a medida que la demanda aumenta o disminuye. Esto permite que no sea necesaria la intervención humana y que sea posible aprovisionar nuestros servidores o ampliar la capacidad de procesamiento de los existentes a demanda.

Por lo tanto, si la nube es elástica no tiene sentido contar con un archivo de configuración fijo donde se guarden las direcciones de cada servicio porque implicaría tener una persona que continuamente esté actualizando ese archivo por cada vez que una instancia se da de alta o baja.

En la siguiente imagen, podemos apreciar que las nuevas instancias resultan desconocidas para la aplicación, a menos que alguien las agregue manualmente al archivo de configuración. Esto termina siendo algo ineficiente y altamente propenso a errores.


Otra situación la ilustra la siguiente imagen, donde puede verse claramente cómo dos instancias del servicio dejan de responder (o simplemente se han dado de baja), dando por resultado que la aplicación se encuentre desactualizada nuevamente, e incluso termine fallando por intentar ejecutar servicios que no están disponibles.

Es acá donde aparece el llamado Service discovery, encargado de determinar todas las instancias activas de los servicios por medio de un registro central, el cual es nada menos que el Service registry que conocimos anteriormente.

El Service discovery es un componente que se encarga de recuperar del Service registry todas las instancias de los servicios disponibles y realizar el balance de cargas. Sin embargo, existen dos formas en las que este descubrimiento se pueda dar: del lado del cliente y del lado del servidor. Avancemos para conocer la diferencia.

### Service Discovery - En Spring: EUREKA
Permite desacoplarse de los servidores físicos y escalar rápidamente solo con levantar instancias nuevas.
- Recopera del **Service registry** todas las instancias y realizar el BALANCE DE CARGAS.
  - Del lado del cliente
  - Del lado del servidor




